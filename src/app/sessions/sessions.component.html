<div class="sessions">
    <div class="modules">
        <!-- <app-chose></app-chose> -->
        <!-- <app-connexion></app-connexion> -->
        <!-- <app-inscription></app-inscription> -->

<!--------------------------------------- partie initiale --------------------------------------->
        @if ((inscription_steps == 0 ) && (connexion_steps == 0)){
            <h4 class ="block_title">Inscrivez-vous ou connectez-vous</h4>

            <div class="choix">
                <h4>Nouveau sur Doctolib ?</h4>
                <button class="inscription_button" (click)="incrementInscriptionStep(1)">
                    <h4 class="button_texte">s'inscrire</h4>
                </button>
                
                <h4>J'ai déjà un compte Doctolib</h4>
                
                <button class="connexion_button" (click)="incrementConnexionStep(1)">
                    <h4 class="button_texte">se connecter</h4>
                </button>
            </div>

        }

<!--------------------------------------- partie inscription --------------------------------------->
        @if ((inscription_steps > 0) && (connexion_steps == 0)){
            <h3 class="block_title">S'inscrire</h3>
            <form [formGroup]="inscriptionForm" >
                @if ((inscription_steps == 1 ) && (connexion_steps == 0)){
                    <div class="inscription">

                        <button class="previous_button" (click)="decrementIncriptionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <div class="pictogram_container">
                            <svg width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"  data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/envelope">
                                <path d="M12.5 3.5h-9C2.656 3.5 2 4.18 2 5v6c0 .844.656 1.5 1.5 1.5h9c.82 0 1.5-.656 1.5-1.5V5c0-.82-.68-1.5-1.5-1.5m-9 1.125h9c.188 0 .375.188.375.375v.54L8.961 8.772c-.54.446-1.406.446-1.945 0L3.125 5.54V5c0-.188.164-.375.375-.375m9 6.75h-9A.37.37 0 0 1 3.125 11V6.992l3.188 2.672A2.68 2.68 0 0 0 8 10.25c.61 0 1.195-.21 1.664-.586l3.211-2.672V11c0 .21-.188.375-.375.375"></path>
                            </svg>
                            
                        </div>
                        
                        <h3>Saisissez votre adresse mail ou votre numéro de téléphone</h3>
                        
                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': isValidInscriptionField('email') === false, 'valid': isValidInscriptionField('email') === true }">   
                                <input class="input" type="email" placeholder="Adresse mail ou numéro de téléphone" formControlName="email" />
                                
                                <svg class="invalid_pictogram" *ngIf="isValidInscriptionField('email') === false" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isValidInscriptionField('email') === true" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>
                            </div>
                        </div>   

                        <progress class="progress" value="2" max="9"></progress>
        
                        <button class = "continue_button" (click)="incrementInscriptionStep(1)">
                            <h4 class = "button_texte">Continuer</h4>
                        </button>
                    </div>
                }

                @if ((inscription_steps == 2 ) && (connexion_steps == 0)){
                    <div class="inscription2">

                        <button class="previous_button" (click)="decrementIncriptionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
        
                        <div class="pictogram_container">
                            <svg width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" class="dl-icon dl-icon-primary-110 dl-icon-xsmall" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/user">
                                <path d="M9.125 9.125h-2.25A4.116 4.116 0 0 0 2.75 13.25c0 .422.328.75.75.75h9c.398 0 .75-.328.75-.75a4.13 4.13 0 0 0-4.125-4.125m-5.25 3.75a3.016 3.016 0 0 1 3-2.625h2.25a3.01 3.01 0 0 1 2.977 2.625zM8 8c1.64 0 3-1.336 3-3 0-1.64-1.36-3-3-3-1.664 0-3 1.36-3 3 0 1.664 1.336 3 3 3m0-4.875A1.88 1.88 0 0 1 9.875 5 1.866 1.866 0 0 1 8 6.875 1.85 1.85 0 0 1 6.125 5c0-1.031.82-1.875 1.875-1.875"></path>
                            </svg>
                        </div>

                        <h3>Renseignez votre identité</h3>

                        <p  class="mt-16">Identité</p>


                        <div class="sex">
                            <button class="sex_button" (click)="setsexFeminin()">
                                <svg class="picto" width="16" height="16" fill="#80a1c2" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                    @if (inscriptionForm.get('sex')?.value == 'F'){
                                        <circle cx="8" cy="8" r="7" stroke="#2284ce" stroke-width="1" fill="none" />
                                        <circle cx="8" cy="8" r="4" fill="#107aca" />
                                    }
                                    @else{
                                        <circle cx="8" cy="8" r="7" stroke="#80a1c2" stroke-width="1" fill="none" />
                                    }
                                </svg>
                                Feminin
                            </button>

                            <button class="sex_button" (click)="setsexMasculin()">
                                <svg class="picto" width="16" height="16"  viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                    @if (inscriptionForm.get('sex')?.value == 'M'){
                                        <circle cx="8" cy="8" r="7" stroke="#2284ce" stroke-width="1" fill="none" />
                                        <circle cx="8" cy="8" r="4" fill="#107aca" />
                                    }
                                    @else{
                                        <circle cx="8" cy="8" r="7" stroke="#80a1c2" stroke-width="1" fill="none" />
                                    }
                                </svg>
                                Masculin
                            </button>
                        </div>

                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': isValidInscriptionField('firstName') === false, 'valid': isValidInscriptionField('firstName') === true }">
                                <input class="input" type="name" placeholder="Prénom" formControlName="firstName" (blur)="inscriptionForm.get('firstName')?.markAsTouched()" />
                                
                                <svg class="invalid_pictogram" *ngIf="isValidInscriptionField('firstName') === false"  (click)="clearEmailInput()" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isValidInscriptionField('firstName') === true" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>

                            </div>
                            <p class="error_message" *ngIf="isValidInscriptionField('firstName') === false">Ces caractères ne sont pas autorisés dans ce champ (chiffres, /, .)</p>
                        </div>   
                        
                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': isValidInscriptionField('lastName') === false, 'valid': isValidInscriptionField('lastName') === true }">
                                <input class="input" type="name" placeholder="Nom" formControlName="lastName" (blur)="inscriptionForm.get('lastName')?.markAsTouched()" />
                                
                                <svg class="invalid_pictogram" *ngIf="isValidInscriptionField('lastName') === false"  (click)="clearEmailInput()" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isValidInscriptionField('lastName') === true" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>

                            </div>
                            <p class="error_message" *ngIf="isValidInscriptionField('lastName') === false">Ces caractères ne sont pas autorisés dans ce champ (chiffres, /, .)</p>
                        </div>   
        
                        <p class="mt-16">Date de naissance</p>

                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': (isDateValid() === 0 || isDateValid() === 2), 'valid': isDateValid() === 1  }">
                                <input class="input" type="date" placeholder="Date de naissance" formControlName="dateOfBirth" (blur)="inscriptionForm.get('dateOfBirth')?.markAsTouched()"/>
                                
                                <svg class="invalid_pictogram" *ngIf="(isDateValid() === 0 || isDateValid() === -1)" (click)="clearEmailInput()" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isDateValid() === 1" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>


                            </div>
                            <p class="error_message" *ngIf="isDateValid() === -1">Si vous avez moins de 15 ans, demandez à un parent de prendre rendez-vous pour vous depuis son compte Doctolib</p>
                        </div>   

                        <progress class="progress" value="3" max="9"></progress>
        
                        <button class = "continue_button" (click)="isValidInscriptionField('firstName') === true && isValidInscriptionField('lastName') ===true ? incrementInscriptionStep(1) : null">
                            <h4 class = "button_texte">Continuer</h4>
                        </button>

                    </div>
                }

                @if ((inscription_steps == 3 ) && (connexion_steps == 0)){
                    <div class="inscription">

                        <button class="previous_button" (click)="decrementIncriptionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <div class="pictogram_container">
                            <svg width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" class="dl-icon dl-icon-primary-110 dl-icon-xsmall" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/lock">
                                <path d="M5 6.5V5c0-1.64 1.336-3 3-3 1.64 0 3 1.36 3 3v1.5h.75c.82 0 1.5.68 1.5 1.5v4.5c0 .844-.68 1.5-1.5 1.5h-7.5a1.48 1.48 0 0 1-1.5-1.5V8c0-.82.656-1.5 1.5-1.5zm1.125 0h3.75V5A1.88 1.88 0 0 0 8 3.125 1.866 1.866 0 0 0 6.125 5zm-2.25 6c0 .21.164.375.375.375h7.5a.385.385 0 0 0 .375-.375V8a.4.4 0 0 0-.375-.375h-7.5A.385.385 0 0 0 3.875 8z"></path>
                            </svg>
                        </div>
                        
                        <h3>Définissez votre mot de passe</h3>

                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': (isPasswordValid() === 0) , 'valid': isPasswordValid() < 0  }">
                                
                                @if (!showPassword){
                                    <input class="input" type="password" placeholder="Mot de passe" formControlName="password" (blur)="inscriptionForm.get('password')?.markAsTouched()"/>
                                } @else {
                                    <input class="input" type="text" placeholder="Mot de passe" formControlName="password" (blur)="inscriptionForm.get('password')?.markAsTouched()"/>
                                }

                                @if(isPasswordValid() === 0){
                                <svg class="invalid_pictogram"  width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>
                                }
                                @else {
                                    <svg class="valid_pictogram" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                        <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                    </svg>
                                }
                                

                                <svg class="pictogram" width="24" height="24" viewBox="0 0 24 24" (click)="togglePassword()">
                                    @if (showPassword){
                                        <path d="M10 4C3.4 4 0 8.8 0 9.6c0 .8 3.4 5.6 10 5.6s10-4.8 10-5.6C20 8.8 16.6 4 10 4zm0 10c-2.5 0-4.4-2-4.4-4.4 0-2.4 2-4.3 4.4-4.3 2.5 0 4.4 2 4.4 4.3 0 2.4-2 4.3-4.4 4.3zm0-4.4c-.4-.4.7-2.2 0-2.2-1.2 0-2.2 1-2.2 2.2 0 1.2 1 2.2 2.2 2.2 1.2 0 2.2-1 2.2-2.2 0-.5-1.9.4-2.2 0z"></path>
                                    }
                                    @else{
                                        <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path>
                                    }
                                </svg>

                                <!-- @if (this.inscriptionForm.get('password')?.value.length > 0){
                                    <progress class="input_progress" value="isPasswordValid()" max="4"></progress>
                                } -->

                            </div>
                            <p class="error_message" *ngIf="isPasswordValid() === 0">Votre mot de passe doit comporter au moins 8 caractères.</p>
                            <p class="error_message" *ngIf="isPasswordValid() === 1">Niveau de sécurité : Faible</p>
                            <p class="error_message" *ngIf="isPasswordValid() === 2">Niveau de sécurité : Moyen</p>
                            <p class="error_message" *ngIf="isPasswordValid() === 3">Niveau de sécurité : Fort</p>
                            <p class="error_message" *ngIf="isPasswordValid() === 4">Niveau de sécurité : Très fort</p>
                            
                        </div>   
                        
                        <progress class="progress" value="4" max="9"></progress>
                        
                        <button class = "continue_button" (click)="incrementInscriptionStep(1)" >
                            <h3 class = "button_texte">Continuer</h3>
                        </button>
                    </div>
                }

                @if ((inscription_steps == 4 ) && (connexion_steps == 0)){
                    <div class="inscription">

                        <button class="previous_button" (click)="decrementIncriptionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <div class="pictogram_container">
                            <svg  width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"  data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/phone">
                                <path d="m13.25 9.523-2.297-.984c-.515-.234-1.101-.07-1.453.352l-.633.773a7 7 0 0 1-2.531-2.508l.797-.633c.398-.351.562-.937.351-1.43L6.477 2.75a1.22 1.22 0 0 0-1.407-.703l-2.133.492C2.375 2.656 2 3.15 2 3.734A10.263 10.263 0 0 0 12.266 14c.586 0 1.078-.375 1.171-.938l.493-2.132a1.18 1.18 0 0 0-.68-1.407m-.398 1.149-.493 2.133c0 .023-.046.07-.093.07-5.04 0-9.164-4.102-9.164-9.14a.1.1 0 0 1 .093-.094l2.133-.493.024-.023c.046 0 .07.047.093.07l.985 2.297c.023.047.023.094-.024.117l-1.148.938a.57.57 0 0 0-.14.68 8.02 8.02 0 0 0 3.632 3.632c.234.118.54.07.703-.14l.938-1.149c.023-.023.07-.047.117-.023l2.297.984c.047.047.07.094.047.14Z"></path>
                            </svg>
                        </div>
                        
                        <h3>Saisissez votre numéro de téléphone</h3>
                        
                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': isValidInscriptionField('phone') === false, 'valid': isValidInscriptionField('phone') === true }">
                                <input class="input" type="phone" placeholder="Numéro de téléphone" formControlName="phone" (blur)="inscriptionForm.get('phone')?.markAsTouched()" />
                                
                                <svg class="invalid_pictogram" *ngIf="isValidInscriptionField('phone') === false"  (click)="clearEmailInput()" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isValidInscriptionField('phone') === true" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>

                            </div>
                        </div>   

                        <p class="phone_sub_text"> Pour confirmer ce numéro, nous allons vous envoyer un code à 3 chiffres par SMS. Ce numéro sera utilisé pour la double authentification et les rappels de vos rendez-vous.</p>
                        
                        <progress class="progress" value="5" max="9"></progress>
                        
                        <button class = "continue_button" (click)="incrementInscriptionStep(1)">
                            <h3 class = "button_texte">Continuer</h3>
                        </button>
                    </div>
                }

                @if ((inscription_steps == 5 ) && (connexion_steps == 0)){
                    <div class="inscription">

                        <button class="previous_button" (click)="decrementIncriptionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <!-- <img src="assets/images/image-inscription.png" alt="image-inscription"> -->
                        
                        <h4>Conditions d'utilisation et Politique de protection des données personnelles</h4>
                        
                        <div class = "linkUseCondition">
                            <p>Pour créer un compte Doctolib, veuillez accepter les </p>
                            <a  class="use_cond_link" href="https://doctolib.legal/CU-B2C-FR">Conditions d'utilisation.</a>
                        </div>
                        
                        <button class="approuve_conditions" (click)="toggleUseConditions()">
                            <input [checked]="useConditions" [attr.aria-invalid]="!useConditions" class="checkbox_cd" id="terms_and_conditions-0" name="checked" type="checkbox" value="true">
                            J'ai lu et j'accepte les Conditions d'utilisation
                        </button>

                        <div class = "linkUseCondition">
                            <p>En savoir plus sur le </p>
                            <a  class="use_cond_link" href="https://doctolib.legal/privacy-policy-B2C-FR">traitement des données personnelles</a>
                        </div>

                        <progress class="progress" value="6" max="9"></progress>
                        
                        <button class = "continue_button" (click)="incrementInscriptionStep(1)">
                            <h3 class = "button_texte">Continuer</h3>
                        </button>
                    </div>
                }
            </form>
        }

<!--------------------------------------- partie connexion --------------------------------------->
        @if ((inscription_steps == 0 ) && (connexion_steps > 0)){
            <h3 class="block_title">Se connecter</h3>
            <form [formGroup]="connexionForm" >
                @if ((inscription_steps == 0 ) && (connexion_steps == 1)){
                    <div class="connexion">
                        <button class="previous_button" (click)="decrementConnexionStep()">
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <div class="pictogram_container">
                            <svg width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"  data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/envelope">
                                <path d="M12.5 3.5h-9C2.656 3.5 2 4.18 2 5v6c0 .844.656 1.5 1.5 1.5h9c.82 0 1.5-.656 1.5-1.5V5c0-.82-.68-1.5-1.5-1.5m-9 1.125h9c.188 0 .375.188.375.375v.54L8.961 8.772c-.54.446-1.406.446-1.945 0L3.125 5.54V5c0-.188.164-.375.375-.375m9 6.75h-9A.37.37 0 0 1 3.125 11V6.992l3.188 2.672A2.68 2.68 0 0 0 8 10.25c.61 0 1.195-.21 1.664-.586l3.211-2.672V11c0 .21-.188.375-.375.375"></path>
                            </svg>
                        </div>

                        <h3>Saisissez votre adresse mail ou votre numéro de téléphone</h3>

                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': isValidConnexionField('email') === false, 'valid': isValidConnexionField('email') === true }">   
                                <input class="input" type="email" placeholder="Adresse mail ou numéro de téléphone" formControlName="email" />
                                
                                <svg class="invalid_pictogram" *ngIf="isValidConnexionField('email') === false" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.022 11.984a.724.724 0 0 1 0 1.055.73.73 0 0 1-.515.211.74.74 0 0 1-.539-.211L8.028 9.06l-3.943 3.98a.73.73 0 0 1-.515.211.74.74 0 0 1-.538-.211.724.724 0 0 1 0-1.055L6.95 7.98 2.978 4.034a.724.724 0 0 1 0-1.055.72.72 0 0 1 1.054 0l3.995 3.947 3.941-3.947a.72.72 0 0 1 1.054 0 .724.724 0 0 1 0 1.055L9.08 8.004l3.94 3.98Z"></path>
                                </svg>

                                <svg class="valid_pictogram" *ngIf="isValidConnexionField('email') === true" width="16" height="16" fill="white" viewBox="0 0 16 16">
                                    <path d="M13.016 4.484a.723.723 0 0 1 0 1.055l-6 6a.723.723 0 0 1-1.055 0l-3-3a.723.723 0 0 1 0-1.055.723.723 0 0 1 1.055 0l2.46 2.461 5.485-5.46a.723.723 0 0 1 1.055 0Z"></path>
                                </svg>
                            </div>
                        </div>

                        <progress class="progress" value="2" max="3"></progress>

                        <button class = "continue_button" (click)="incrementConnexionStep()">
                            <h3 class = "button_texte">Continuer</h3>
                        </button>
                    </div>
                }

                @if ((inscription_steps == 0 ) && (connexion_steps == 2)){
                    <div class="connexion">

                        <button class="previous_button" (click)="decrementConnexionStep()" >
                            <svg class="picto" width="16" height="16" fill="#192634" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/arrow-left">
                                <path d="M7.04 12.36 2.913 8.421A.56.56 0 0 1 2.75 8a.55.55 0 0 1 .164-.398L7.04 3.664c.234-.21.586-.21.797.024a.56.56 0 0 1-.024.796L4.696 7.438h7.97c.327 0 .562.257.562.562a.57.57 0 0 1-.563.563h-7.97l3.117 2.976a.56.56 0 0 1 .024.797.56.56 0 0 1-.797.023Z"></path>
                            </svg>
                            Étape précédente
                        </button>
                        
                        <!-- <div class="pictogram_container">
                            <svg width="16" height="16" fill="#107aca" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" class="dl-icon dl-icon-primary-110 dl-icon-xsmall" data-design-system="oxygen" data-design-system-component="Icon" data-icon-name="regular/lock">
                                <path d="M5 6.5V5c0-1.64 1.336-3 3-3 1.64 0 3 1.36 3 3v1.5h.75c.82 0 1.5.68 1.5 1.5v4.5c0 .844-.68 1.5-1.5 1.5h-7.5a1.48 1.48 0 0 1-1.5-1.5V8c0-.82.656-1.5 1.5-1.5zm1.125 0h3.75V5A1.88 1.88 0 0 0 8 3.125 1.866 1.866 0 0 0 6.125 5zm-2.25 6c0 .21.164.375.375.375h7.5a.385.385 0 0 0 .375-.375V8a.4.4 0 0 0-.375-.375h-7.5A.385.385 0 0 0 3.875 8z"></path>
                            </svg>
                        </div> -->
                        
                        <h3>Bienvenue</h3>

                        <p class="last_email">{{ connexionForm.get('email')?.value }}</p>

                        <p class="password_header">Mot de passe</p>
                        <div class="input_with_pictogram_container">
                            <div class="input_with_pictogram"  [ngClass]="{ 'error': (isPasswordValid() === 0) , 'valid': isPasswordValid() < 0  }">
                                @if (showPassword){
                                    <input class="input" type="text" placeholder="Mot de passe" formControlName="password" (blur)="inscriptionForm.get('password')?.markAsTouched()"/>
                                } @else {
                                    <input class="input" type="password" placeholder="Mot de passe" formControlName="password" (blur)="inscriptionForm.get('password')?.markAsTouched()"/>
                                }

                                <svg class="pictogram" width="24" height="24" viewBox="0 0 24 24" (click)="togglePassword()">
                                    @if (showPassword){
                                        <path d="M10 4C3.4 4 0 8.8 0 9.6c0 .8 3.4 5.6 10 5.6s10-4.8 10-5.6C20 8.8 16.6 4 10 4zm0 10c-2.5 0-4.4-2-4.4-4.4 0-2.4 2-4.3 4.4-4.3 2.5 0 4.4 2 4.4 4.3 0 2.4-2 4.3-4.4 4.3zm0-4.4c-.4-.4.7-2.2 0-2.2-1.2 0-2.2 1-2.2 2.2 0 1.2 1 2.2 2.2 2.2 1.2 0 2.2-1 2.2-2.2 0-.5-1.9.4-2.2 0z"></path>
                                    }
                                    @else{
                                        <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path>
                                    }
                                </svg>

                            </div>
                        </div>   
                        <div class="space"></div>
                        <button class = "continue_button" (click)="incrementConnexionStep(1)">
                            <h3 class = "button_texte">Continuer</h3>
                        </button>

                    </div>
                }
            </form> 
        }
    </div>
</div>

<!-- 
<div class="first_time_popup">
    <h2>Première fois sur Doctolib ?</h2>

    <p>L'email saisi () n'est associé à aucun compte Doctolib.</p>

    <span>
        <button class="bt_modif_popup" > Modifier l'e-mail saisi</button>
        <button class="bt_inscription_popup" (click)="incrementInscriptionStep(2); decrementConnexionStep()" > S'inscrire avec cet email</button>  
    </span>

</div>


<div class="already_registered_popup">
    <h2>Avez-vous deja un compte ?</h2>

    <p>Le numéro saisi () est déjà associé à un compte Doctolib. S'il s'agit du votre, connectez-vous.</p>

    <span>
        <button class="bt_modif_popup" > Modifier le numéro saisi</button>
        <button class="bt_inscription_popup" (click)="incrementConnexionStep(); decrementIncriptionStep(4)" > Se connecter avec ce numéro</button> 
    </span>

</div> -->
